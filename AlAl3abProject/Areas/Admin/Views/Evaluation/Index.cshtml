@model AlAl3abProject.Models.HomePageModel
@inject Microsoft.AspNetCore.Identity.UserManager<BL.ApplicationUser> USERmANAGER
<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="py-3 breadcrumb-wrapper mb-4"><span class="text-muted fw-light">لوحة التحكم /</span>  تقييمات المنتجات</h4>
    
    <!-- DataTable with Buttons -->
    <div class="card">
        <div class="data_table">
            <table id="example" class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>اسم صاحب التقييم</th>
                        <th>اسم  المنتج</th>
                        <th>اسم  التاجر</th>
                      
                      
                        <th>  التاريخ</th>

                        <th>  التفاصيل</th>

                        <th>اخفاء او اظهار</th>


                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.lstEvaluations)
                    {

                        <tr>
                            <td>@USERmANAGER.Users.Where(a=> a.Id == item.UserId).FirstOrDefault().FirstName</td>
                            <td>@Model.lstItems.Where(a=> a.ItemId == item.ItemId).FirstOrDefault().ItemName</td>
                            <td>@Model.lstSellers.Where(a=> a.SellerId == item.SellerId).FirstOrDefault().SellerFullName</td>
                           
                            
                            <td>@item.CreatedDate</td>


                            <td>
                                <a asp-area="Admin" asp-controller="Evaluation" asp-action="Form" asp-route-id="@item.EvaluationId" class="btn btn-info text-white" style="cursor:pointer">
                                    التفاصيل
                                </a>

                            </td>
                         
                           @if(item.CurrentState ==1 ) 
                           {
                                <td>
                                    <a asp-area="Admin" asp-controller="Evaluation" asp-action="Delete" asp-route-id="@item.EvaluationId" class="btn btn-danger text-white" style="cursor:pointer">
                                        حذف
                                    </a>
                                </td>

                           }
                            else if (item.CurrentState == 0)
                           {
                                <td>
                                    <a asp-area="Admin" asp-controller="Evaluation" asp-action="Delete" asp-route-id="@item.EvaluationId" class="btn btn-info text-white" style="cursor:pointer">
                                        اظهار
                                    </a>
                                </td>

                           }
                          


                        </tr>

                    }


                </tbody>
            </table>
        </div>
    </div>
    <!-- Modal to add new record -->
    <div class="offcanvas offcanvas-end" id="add-new-record">
        <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title" id="exampleModalLabel">New Record</h5>
            <button type="button"
                    class="btn-close text-reset"
                    data-bs-dismiss="offcanvas"
                    aria-label="Close"></button>
        </div>

    </div>
    <!--/ DataTable with Buttons -->

    <hr class="my-5" />


    <!--/ Content -->
</div>